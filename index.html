<!doctype html>
<meta charset="UTF-8">
<html>
  <head>
    <title>Arbitrator</title>
    <script src="script/index.js"></script>
    <!-- <script src="script/modules/jquery.js"></script>
    <script src="https://apis.google.com/js/client.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true&libraries=places"></script>
    <script type="text/javascript" src="script/prefstore.js"></script>
    <script src="script/modules/sha1.js"></script>
    <script type="text/javascript" src="script/arbitrator.js"></script>
    <script type="text/javascript" src="script/game.js"></script>
    <script type="text/javascript" src="script/ui.js"></script>
    <script type="text/javascript" src="script/location.js"></script>
    <script type="text/javascript" src="script/place.js"></script> -->
    <link rel="stylesheet" href="style/arbitrator.css" type="text/css" />
    <!-- <script>
    function populateCalendarList() {
      gapi.client.load('calendar', 'v3', function() {
        var request = gapi.client.calendar.calendarList.list({
        });

        request.execute(function(aResponse) {
          var selectEle = document.getElementById('calendarList');
          for (calendarIdx in aResponse.items) {
              var calendarItem = aResponse.items[calendarIdx];
              var listItem = document.createElement('option');
              listItem.id = calendarItem.id;
              listItem.text = calendarItem.summary;
              selectEle.appendChild(listItem);
          }
          selectEle.style.display = 'block';
        });
      });
    }

    function handleAuthResult(authResult) {
      if (authResult && !authResult.error) {
        populateCalendarList();
      }
    }

    function initialize() {
      var config = {
        'client_id': '609265890429-c5d69skkd9o2f1fksco00294oom2burf.apps.googleusercontent.com',
        'scope': 'https://www.googleapis.com/auth/calendar',
        'authuser' : -1
      };
      gapi.auth.authorize(config, handleAuthResult);

      updateGroupAliasPreferenceUI();
      updateTimePreferenceUI();
      updateLocationPreferenceUI();
    }

    function arbitrate() {
      var scheduleText = document.getElementById('schedule').value;
      var arb = new Arbitrator(scheduleText);
      var calSelectionElement = document.getElementById('calendarList');
      var selectedId = calSelectionElement[calSelectionElement.selectedIndex].id;
      arb.adjustGamesOrSubmitToCalendar(selectedId);

      updateGroupAliasPreferenceUI();
    }

    $(document).ready(function() {
      initialize();
    });

    </script> -->
  </head>
  <body>
    <div id="mainContent">
      <div id="messageContainer" class="hidden"><div id="message"></div><div class="instructions">Click to Dismiss</div></div>
      <textarea id="schedule">Cut and paste your schedule here.</textarea>
      <br />
      <select id="calendarList" style="display: none">
        <option id="noCalendarSelectedOption">Select Calendar</option>
      </select>
      <br />
      <button id="arbitrate-button" onclick="arbitrate();">Submit</button>
    </div>
    <div id="prefArea">
      <h2>Preferences</h2>
      <hr>
      <div class="prefGroup" id="aliasPrefs">
        <h4>Group Aliases</h4>
        You can add aliases for specific groups here so they are more readable in your calendar.
        <div class="inputSet" id="aliasInputs">
        </div>
      </div>
      <div class="prefGroup" id="timingPrefs">
        <h4>Time</h4>
        You can add preferences for game times here.<br />
        <div class="inputSet">
          <div class="labelSet">
            <label for="timePref-priorToStart">Minutes before start:</label>
            <div class="inputMessageAreaFloatContainer"><span id="msg-priorToStart" class="inputMessageArea"></span></div>
            <button id="setMinStart" onclick="setTimePref('priorToStart')">Set</button>
            <input type="number" id="timePref-priorToStart" value="30" />
          </div>
          <div class="labelSet">
            <label for="timePref-gameLength">Length of game:</label>
            <div class="inputMessageAreaFloatContainer"><span id="msg-gameLength" class="inputMessageArea"></span></div>
            <button id="setMinEnd" onclick="setTimePref('gameLength')">Set</button>
            <input type="number" id="timePref-gameLength" value="60" />
          </div>
        </div>
        <div class="inputSet">
          <div class="labelSet">
            <label for="timePref-consecutiveGames">Consecutive Game Threshold (Hours):</label>
            <div class="inputMessageAreaFloatContainer"><span id="msg-consecutiveGames" class="inputMessageArea"></span></div>
            <button id="setConsecutiveGameThreshold" onclick="setTimePref('consecutiveGames')">Set</button>
            <input type="number" id="timePref-consecutiveGames" value="2" />
          </div>
        </div>
      </div>
      <div class="prefGroup" id="locationPrefs">
        <h4>Locations</h4>
        You can add preferences for specific locations here so the addresses are
        stored for later use.
        <br /><br />
        <div class="inputSet">
        </div>
      </div>
    </div>
  </body>
</html>
