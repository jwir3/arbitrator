{"version":3,"file":null,"sources":["src/arbitrator/Place.js","src/env.js","src/arbitrator/PreferenceStore.js","src/arbitrator/Game.js","src/arbitrator/secret.js","src/arbitrator/ArbitratorConfig.js","src/helpers/window.js","src/arbitrator/ArbitratorGoogleClient.js","src/arbitrator/StringUtils.js","src/arbitrator/UIManager.js","src/arbitrator/Arbitrator.js","src/test/checkGame.js","src/test/Arbitrator.spec.js","src/test/PreferenceStore.spec.js","src/specs.js.autogenerated"],"sourcesContent":["/**\n * A Place consists of a name, a shorter name (the alias used within Arbiter to\n * identify the site), an address, and a sub-location name (possibly blank). The\n * address may be undefined if no address was specified for this Place.\n */\nexport var Place = function(aShortName, aName, aAddress, aSubLocationName) {\n  this.mShortName = aShortName;\n  this.mName = aName;\n  this.mAddress = aAddress;\n  this.mSubLocationName = aSubLocationName;\n}\n\nPlace.prototype = {\n  getShortName: function() {\n    return this.mShortName;\n  },\n\n  getName: function() {\n    return this.mName;\n  },\n\n  getAddress: function() {\n    return this.mAddress;\n  },\n\n  getSubLocationName: function() {\n    return this.mSubLocationName;\n  },\n\n  hasSubLocation: function() {\n    return this.getSubLocationName() != \"\";\n  }\n}\n","// Simple wrapper exposing environment variables to rest of the code.\n\nimport jetpack from 'fs-jetpack';\n\n// The variables have been written to `env.json` by the build process.\nvar env = jetpack.cwd(__dirname).read('env.json', 'json');\n\nexport default env;\n","import { Place } from './Place'\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport jetpack from 'fs-jetpack'\nimport env from '../env'\n\nconst PREFERENCE_STORE_KEY = Symbol(\"PreferenceStore\");\n\n/**\n * An object connected to local storage for persistent storage of setting\n * data.\n */\nvar PreferenceStore = function() {\n  if (env.name == 'test') {\n    this.shouldStore = false;\n  }\n\n  this._retrievePreferences();\n}\n\nexport var TimeType = {\n  /**\n   * Flag for indicating the time type is prior to the game start.\n   */\n  PRIOR_TO_START: 'priorToStart',\n\n  /**\n   * Flag for indicating the time type is after the game start until the game\n   * ends (i.e. the length of the game).\n   */\n  LENGTH_OF_GAME: 'gameLength',\n\n  /**\n   * Flag for indicating how long (in hours) between games should be considered\n   * \"consecutive\" games. Any game at the same location within this number of\n   * hours of a previous game on the same day will be considered \"consecutive\".\n   */\n  CONSECUTIVE_GAME_THRESHOLD: 'consecutiveGames'\n};\n\nPreferenceStore.prototype = {\n  authTokens: null,\n  shouldStore: true,\n\n  /**\n   * Add an alias for a group ID so that it can be reported as a human-readable\n   * name.\n   *\n   * @param aGroupId The id of the group to alias\n   * @param aGroupAlias The alias to replace the group id with.\n   */\n  addGroupAlias: function(aGroupId, aGroupAlias) {\n    if (!this.groupAliases) {\n      this.groupAliases = {};\n    }\n\n    this._verifyExtensibility(\"groupAliases\");\n\n    this.groupAliases[aGroupId] = aGroupAlias;\n    this._putPreferences();\n  },\n\n  /**\n   * Add a time preference to the preference store.\n   *\n   * @param aType The type to add. Must be one of TimeType available options.\n   * @param aTimePeriod The time value to add to the preference store. If not\n   *        >= 0, then will be set to 0.\n   */\n  addTimePreference: function(aType, aTimePeriod) {\n    if (!this.time) {\n      this.time = {};\n    }\n\n    if (aTimePeriod < 0) {\n      console.log(\"Unable to set a time preference value < 0. Resetting time to 0.\");\n      aTimePeriod = 0;\n    }\n\n    var priorStart = this.time[TimeType.PRIOR_TO_START];\n    var gameLength = this.time[TimeType.LENGTH_OF_GAME];\n    var consecThreshold = this.time[TimeType.CONSECUTIVE_GAME_THRESHOLD];\n\n    switch(aType) {\n      case TimeType.PRIOR_TO_START:\n        priorStart = aTimePeriod;\n        break;\n\n      case TimeType.LENGTH_OF_GAME:\n        gameLength = aTimePeriod;\n        break;\n\n      case TimeType.CONSECUTIVE_GAME_THRESHOLD:\n        consecThreshold = aTimePeriod;\n        break;\n\n      default:\n        throw \"Unable to determine type for '\" + aType + \"'\";\n    }\n\n    this.time = {\n      [TimeType.PRIOR_TO_START]: priorStart,\n      [TimeType.LENGTH_OF_GAME]: gameLength,\n      [TimeType.CONSECUTIVE_GAME_THRESHOLD]: consecThreshold\n    };\n\n    this._putPreferences();\n  },\n\n  addLocationPreference: function(aPlace) {\n    if (!this.locations) {\n      this.locations = {};\n    }\n\n    this._verifyExtensibility(\"locations\");\n\n    this.locations[aPlace.getShortName()] = aPlace;\n\n    this._putPreferences();\n  },\n\n  /**\n   * Retrieve the value of a single time preference.\n   *\n   * @param aTimeType The time of time preference to retrieve. Must be one of the\n   *        types specified in TimeType.\n   * @param aDefault The default time (in minutes) to specify if one has not been\n   *        added to the preference store.\n   *\n   * @return A numeric value indicating the number of minutes specified for the\n   *         given time preference.\n   */\n  getTimePreference: function(aTimeType, aDefault) {\n    if (this.time && this.time[aTimeType]) {\n      return parseInt(this.time[aTimeType], 10);\n    }\n\n    return aDefault;\n  },\n\n  getLocationPreference: function(aLocationKey) {\n      if (this.locations && this.locations[aLocationKey]) {\n        var genericLoc = this.locations[aLocationKey];\n        return new Place(genericLoc.mShortName, genericLoc.mName,\n                        genericLoc.mAddress, genericLoc.mSubLocationName);\n      }\n\n      return aLocationKey;\n  },\n\n  /**\n   * Retrieve all preferences related to time currently in the preference store.\n   *\n   * @return An object with members corresponding to time preferences as defined\n   *         in TimeType, if they exist in the local storage; an empty object,\n   *         otherwise.\n   */\n  getAllTimePreferences: function() {\n    if (this.time) {\n      return Object.freeze(this.time);\n    }\n\n    return new Object();\n  },\n\n  getAllLocationPreferences: function() {\n    if (this.locations) {\n      return Object.freeze(this.locations);\n    }\n\n    return new Object();\n  },\n\n  /**\n   * Retrieve all preferences related to group aliases currently in the\n   * preference store.\n   *\n   * @return An object with members corresponding to group alias preferences if\n   *         any exist in the local storage; an empty object, otherwise.\n   */\n  getAllGroupAliases: function() {\n      if (this.groupAliases) {\n        return Object.freeze(this.groupAliases);\n      }\n\n      return new Object();\n  },\n\n  /**\n   * Retrieve an alias for a group, based on an ID submitted.\n   */\n  getAliasForGroupId: function(aGroupId) {\n    if (this.groupAliases) {\n      var actualName = this.groupAliases[aGroupId];\n      if (actualName) {\n        return actualName;\n      }\n    }\n\n    // Once it's been seen, we should add it to the preference store.\n    this.addGroupAlias(aGroupId, aGroupId);\n\n    return aGroupId;\n  },\n\n  /**\n   * Determine if there are aliased groups in local storage.\n   *\n   * @return true, if there is at least one group id with an alias;\n   *         false, otherwise\n   */\n  hasAliasedGroups: function() {\n    if (this.groupAliases) {\n      for (var prop in this.groupAliases) {\n        if (this.groupAliases.hasOwnProperty(prop)) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  },\n\n  /**\n   * Determine if there are time preferences saved in local storage.\n   *\n   * @return true, if there is at least one time preference saved to local storage;\n   *         false, otherwise\n   */\n  hasTimePreferences: function() {\n    if (this.time) {\n      for (var prop in this.time) {\n        if (this.time.hasOwnProperty(prop)) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  },\n\n  hasLocationPreference: function(aPreferenceKey) {\n    if (this.locations) {\n      if (this.locations.hasOwnProperty(aPreferenceKey)) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n\n  /**\n   * Remove the instance of a single time preference from the preference store.\n   *\n   * @param aTimeType The type of time preference to remove. Must be one of the\n   *        values specified in TimeType.\n   */\n  removeTimePreference: function(aTimeType) {\n    if (this.time) {\n      delete this.time[aTimeType];\n    }\n\n    this._putPreferences();\n  },\n\n  removeLocationPreference: function(aLocationKey) {\n    this._verifyExtensibility(\"locations\");\n\n    if (this.locations) {\n      delete this.locations[aLocationKey];\n    }\n\n    this._putPreferences();\n  },\n\n  /**\n   * Remove a previously created alias for a group ID.\n   *\n   * @param The group id for which the previously-created alias should be\n   *         removed.\n   */\n  removeGroupAlias: function(aGroupId) {\n    this._verifyExtensibility(\"groupAliases\");\n    \n    if (this.groupAliases) {\n      delete this.groupAliases[aGroupId];\n    }\n\n    this._putPreferences();\n  },\n\n  setUserId: function(aUserId) {\n    this.userId = aUserId;\n\n    this._putPreferences();\n  },\n\n  removeUserId: function() {\n    delete this.userId;\n    this._putPreferences();\n  },\n\n  getUserId: function() {\n    return this.userId;\n  },\n\n  /**\n   * Remove all previously created group aliases from the preference store.\n   */\n  removeAllGroupAliases: function() {\n    this.groupAliases = new Object();\n    this._putPreferences();\n  },\n\n  setAuthTokens: function(aAuthTokens) {\n    this.authTokens = aAuthTokens;\n    this._putPreferences();\n  },\n\n  getAuthTokens: function() {\n    return this.authTokens;\n  },\n\n  /**\n   * Put all preferences into local storage to be saved for a later date.\n   */\n  _putPreferences: function() {\n    if (this.shouldStore) {\n      var storedPrefs = jetpack.cwd(this._getUserHome())\n                               .dir(\".arbitrator\")\n                               .write(\"userConfig.json\", this);\n     }\n  },\n\n  /**\n   * Retrieve preferences from local storage and populate this object with the\n   * data from the store.\n   */\n  _retrievePreferences: function() {\n    var storedPrefs = jetpack.cwd(this._getUserHome())\n                             .read(\".arbitrator/userConfig.json\", 'json');\n    if (this.shouldStore && storedPrefs) {\n      this.groupAliases = storedPrefs.groupAliases;\n      this.time = storedPrefs.time;\n      this.locations = storedPrefs.locations;\n      this.userId = storedPrefs.userId;\n      this.authTokens = storedPrefs.authTokens;\n    }\n  },\n\n  _getUserHome: function() {\n    return process.env[(process.platform == 'win32') ? 'USERPROFILE' : 'HOME'];\n  },\n\n  _verifyExtensibility: function(aProperty) {\n    if (!Object.isExtensible(this[aProperty])) {\n      // Make a copy of the object, because somewhere along the line, it became\n      // non-extensible. :(\n      var newObj = {};\n      for (var x in this[aProperty]) {\n        newObj[x] = this[aProperty][x];\n      }\n\n      this[aProperty] = newObj;\n    }\n\n  }\n};\n\nexport var PreferenceSingleton = {};\n\nObject.defineProperty(PreferenceSingleton, \"instance\", {\n  get: function() {\n    if (!global[PREFERENCE_STORE_KEY]) {\n      global[PREFERENCE_STORE_KEY] = new PreferenceStore();\n    }\n\n    return global[PREFERENCE_STORE_KEY];\n  }\n});\n\nObject.freeze(PreferenceSingleton);\n","import * as CryptoJS from 'crypto-js'\nimport { Place } from './Place'\nimport { PreferenceSingleton, TimeType } from './PreferenceStore'\nimport * as moment from 'moment';\n\nvar gameLevels = {\n  'Mite'            : 'Mite',\n  'Squirt'          : 'Squirt',\n  'Peewee'          : 'Peewee',\n  'Bantam'          : 'Bantam',\n  'Junior Gold'     : 'Junior Gold',\n  'Junior'          : 'Junior',\n  'SC'              : 'Squirt C',\n  'SB'              : 'Squirt B',\n  'SA'              : 'Squirt A/AA/AAA',\n  'PC'              : 'Peewee C',\n  'PB'              : 'Peewee B',\n  'PA'              : 'Peewee A/AA/AAA',\n  'BC'              : 'Bantam C',\n  'BB'              : 'Bantam B',\n  'BA'              : 'Bantam A/AA/AAA',\n  'JGB'             : 'Junior Gold B',\n  'JGA'             : 'Junior Gold A/AA/AAA',\n  '10U'             : '10U Girls',\n  '10A'             : '10U Girls A',\n  '10B'             : '10U Girls B',\n  '12U'             : '12U Girls',\n  '12A'             : '12U Girls A',\n  '12B'             : '12U Girls B',\n  '14U'             : '14U Girls',\n  '16U'             : '16U Girls',\n  '19U'             : '19U Girls',\n  'Boys, Varsity'   : 'Varsity Boys',\n  'Girls, Varsity'  : 'Varsity Girls',\n  'Boys, JV'        : 'Junior Varsity Boys',\n  'Girls, JV'       : 'Junior Varsity Girls'\n};\n\n/**\n * Enumeration for Roles. Currently, an official (for hockey) can be one of the\n * following:\n *\n *  - A Referee\n *  - A Linesman\n *  - An unknown role\n *\n * No other roles are supported at this time. In the future, it would be nice to\n * support other roles, but it's unclear how long this polyfill for lack of\n * Google calendar support in AS will last.\n */\nexport var Role = Object.freeze({\n  REFEREE: 0,\n  LINESMAN: 1,\n  UNKNOWN: -1\n});\n\nexport var Game = function (aId, aGroup, aRole, aTimestamp, aSportLevel, aSite,\n                            aHomeTeam, aAwayTeam, aFees) {\n  var prefStore = PreferenceSingleton.instance;\n  this.mId = aId;\n  this.mGroup = prefStore.getAliasForGroupId(aGroup);\n  this.setRole(aRole);\n  this.mTimestamp = aTimestamp;\n  this.mSportLevel = aSportLevel;\n  this.mSite = this.getPlaceForSite(aSite);\n  this.mHomeTeam = aHomeTeam;\n  this.mAwayTeam = aAwayTeam;\n  this.mFees = aFees;\n  this.mIsConsecutiveGame = false;\n}\n\nGame.prototype = {\n  getId: function() {\n    return this.mId;\n  },\n\n  getGroup: function() {\n    return this.mGroup;\n  },\n\n  getSportLevel: function() {\n    return this.mSportLevel;\n  },\n\n  getSite: function() {\n    return this.mSite;\n  },\n\n  getHomeTeam: function() {\n    return this.mHomeTeam;\n  },\n\n  getAwayTeam: function() {\n    return this.mAwayTeam;\n  },\n\n  getFees: function() {\n    return this.mFees;\n  },\n\n  getTimestampAsString: function() {\n    var components = this.mTimestamp.split(\" \");\n    return components[0] + \" \" + components[2] +  \" \" + components[3];\n  },\n\n  /**\n   * Retrieve the moment for which this game starts.\n   *\n   * @return {Moment} A Moment.js moment for which this game is set to start,\n   *                  based on the data from ArbiterSports.\n   */\n  getTimestamp: function() {\n    return moment(this.getTimestampAsString());\n  },\n\n  getTime12Hr: function() {\n    return this.getTimestamp().format(\"h:mma\");\n  },\n\n  getISOStartDate: function() {\n    var prefStore = PreferenceSingleton.instance;\n    var startDate = this.getTimestamp();\n    var priorToStart = prefStore.getTimePreference(TimeType.PRIOR_TO_START, 30);\n    if (this.isConsecutiveGame()) {\n      priorToStart = 0;\n    }\n\n    return startDate.subtract(priorToStart, 'minutes').toISOString();\n  },\n\n  getISOEndDate: function() {\n    var prefStore = PreferenceSingleton.instance;\n    var endDate = this.getTimestamp();\n\n    // Default to 1 hour if no time preference is specified.\n    var gameLengthMins = prefStore.getTimePreference(TimeType.LENGTH_OF_GAME, 60);\n    return endDate.add(gameLengthMins, 'minutes').toISOString();\n  },\n\n  /**\n   * Determines if this game is a consecutive game (a game where the preceding\n   * game is at the same site and ended within two hours of the start of this\n   * game).\n   *\n   * @return true, if this game is a consecutive game; false, otherwise.\n   */\n  isConsecutiveGame: function() {\n    return this.mIsConsecutiveGame;\n  },\n\n  /**\n   * Set whether or not this game is a consecutive game (a game where the\n   * preceding game is at the same site and ended within two hours of the start\n   * of this game).\n   *\n   * @param aIsConsecutive Whether or not this is a consecutive game\n   */\n  setConsecutiveGame: function(aIsConsecutive) {\n    this.mIsConsecutiveGame = aIsConsecutive;\n  },\n\n  /**\n   * Determines if this game is within the time range (within the same day and\n   * within the consecutive game threshold) necessary to be considered for a\n   * possible consecutive game with another game.\n   *\n   * @param aGame A Game for which this game should be determined to follow by\n   *        less than the threshold for consecutive games.\n   *\n   * @return true, if this Game is within the time range necessary to make it a\n   *         potential consecutive game; false, otherwise.\n   */\n  isWithinConsecutiveTimeRangeOf: function(aGame) {\n    var prefStore = PreferenceSingleton.instance;\n    var consecutiveGameThreshold = prefStore.getTimePreference(TimeType.CONSECUTIVE_GAME_THRESHOLD, 2);\n    var aOtherTimestamp = aGame.getTimestamp();\n    var timeStamp = this.getTimestamp();\n    return aOtherTimestamp.date() == timeStamp.date()\n           && aOtherTimestamp.year() == timeStamp.year()\n           && aOtherTimestamp.month() == timeStamp.month()\n           && aOtherTimestamp.hours() + consecutiveGameThreshold >= timeStamp.hours()\n  },\n\n  setRole: function(aRoleString) {\n    // Role is column 3, and can be either \"Referee\" or \"Linesman\".\n    if (aRoleString.search(/referee/i) != -1) {\n      this.mRole = Role.REFEREE;\n    } else if (aRoleString.search(/linesman/i) != -1) {\n      this.mRole = Role.LINESMAN;\n    } else {\n      this.mRole = Role.UNKNOWN;\n    }\n  },\n\n  isTeamValid: function(aTeamName) {\n    switch(aTeamName) {\n      case 'TBD':\n        return false;\n      case 'TBA':\n        return false;\n      default:\n        return true;\n    }\n  },\n\n  getLevel: function() {\n    // See hashmap of levels at the top of the file.\n    // TODO: Add a better algorithm for this.\n\n    var levelString = this.getSportLevel();\n    var levelKeys = Object.keys(gameLevels);\n    for (var level in levelKeys) {\n      if (levelString.indexOf(levelKeys[level]) > 0) {\n        return gameLevels[levelKeys[level]];\n      }\n    }\n\n    // Check for a year\n    var yearStringIdx = levelString.search(/([0-9]{4})/g);\n    var yearString = levelString.slice(yearStringIdx, yearStringIdx+4);\n\n    if (yearString) {\n        var currentYear = (new Date()).getFullYear();\n        var age = parseInt(currentYear,10) - yearString;\n        if (age <= 8) {\n          return 'Mite';\n        } else if (age > 8 && age <= 10) {\n          return 'Squirt';\n        } else if (age > 10 && age <= 12) {\n          return 'Peewee';\n        } else if (age > 12 && age <= 14) {\n          return 'Bantam';\n        } else if (age > 14 && age <= 16) {\n          return '16U Boys/Girls';\n        } else if (age > 16 && age <= 18) {\n          return 'Junior Gold';\n        } else if (age > 18 && age <= 20) {\n          return 'Junior';\n        } else if (age > 20){\n          return 'Senior Mens/Womens';\n        }\n    }\n\n    // TODO: Add analytics so that we can determine what the unknown was.\n    return \"UNKNOWN\";\n  },\n\n  areTeamsValid: function() {\n    return this.isTeamValid(this.mHomeTeam) && this.isTeamValid(this.mAwayTeam);\n  },\n\n  getSummaryString: function() {\n    var summaryString = \"\";\n    if (this.getGroup() != \"NONE\") {\n      summaryString = summaryString + \"[\" + this.getGroup() + \"] \";\n    }\n\n    var role = this.getRole();\n    if (role == Role.REFEREE) {\n      summaryString = summaryString + \"Referee \";\n    } else if (role == Role.LINESMAN) {\n      summaryString = summaryString + \"Linesman \";\n    } else {\n      summaryString = summaryString + \"Officiate \";\n    }\n\n   if (this.isScrimmage()) {\n      summaryString = summaryString + \"Scrimmage \";\n   }\n\n   if (this.areTeamsValid()) {\n      summaryString = summaryString + this.mHomeTeam + \" v \" + this.mAwayTeam + \" \";\n   }\n\n   var level = this.getLevel();\n   if (level != 'UNKNOWN') {\n     summaryString = summaryString + \"(\" + level + (this.isTournament() ? \" Tournament\" : \"\") + \")\";\n   }\n\n   return summaryString.trim();\n  },\n\n  getRole: function() {\n    return this.mRole;\n  },\n\n  getEventJSON: function() {\n    var siteData = this.getSite().getAddress() ? this.getSite().getAddress() : this.getSite().getName();\n    var subLocationString = this.getSite().hasSubLocation() ? \"\\n\\nRink \" + this.getSite().getSubLocationName() : \"\";\n    return  {\n      \"end\": {\n        \"dateTime\": this.getISOEndDate()\n      },\n      \"start\": {\n        \"dateTime\": this.getISOStartDate()\n      },\n      \"location\": siteData,\n      \"description\": \"Game starts at \" + String(this.getTime12Hr())\n                     + subLocationString\n                     + \"\\n\\n{ArbitratorHash: \" + String(this.getHash()) + \"}\",\n      \"summary\": this.getSummaryString()\n    };\n  },\n\n  isScrimmage: function() {\n    return this.getSportLevel().search(/scrimmage/i) != -1;\n  },\n\n  isTournament: function() {\n    return this.getSportLevel().search(/tournament/i) != -1;\n  },\n\n  /**\n   * Retrieve an identification string for this game. Essentially, this is\n   * just a concatenation of the game id, the group, teams playing, and level.\n   *\n   * @return A string that is an identifier for this game. This identifier should\n   *         not change, even if the game dates/times change.\n   */\n   getIdentificationString: function() {\n      // var level = this.getLevel() === \"UNKNOWN\" ? \"\" : this.getLevel();\n      // var teams = this.areTeamsValid() ? this.getHomeTeam() + \"v\" + this.getAwayTeam() : \"\";\n      var idString = String(this.getId());\n      // idString = idString + this.getGroup() + level + teams;\n\n      return idString.replace(/\\s+/gm, \"\");\n   },\n\n  /**\n   * Retrieve a hash of the unique identifying information of this game. This\n   * serves to identify the game if the date/time changes.\n   *\n   * @return A string of a SHA-1 hash of the game id.\n   */\n  getHash: function() {\n    return CryptoJS.SHA1(this.getIdentificationString()).toString(CryptoJS.enc.Hex);\n  },\n\n\n  /**\n   * Retrieve a Place object for some existing site string.\n   *\n   * @param aSiteName The textual name of the site, as passed in from ArbiterSports.\n   *\n   * @returns A Place object with name equivalent to aSiteName, but with an address\n   *          if one was found in the preference store.\n   */\n  getPlaceForSite: function(aSiteName) {\n    // Convert the site name to a key\n    var placeKey = aSiteName.replace(/\\s/g, '');\n\n    var prefStore = PreferenceSingleton.instance;\n    if (prefStore.hasLocationPreference(placeKey)) {\n      return prefStore.getLocationPreference(placeKey);\n    }\n\n    var place = new Place(placeKey, aSiteName, undefined, \"\");\n    prefStore.addLocationPreference(place);\n    return place;\n  }\n}\n","export var secret = {\n  \"googleClientId\": \"609265890429-0evcp2uqktl726lf6ijfu56fpkh8c7cv.apps.googleusercontent.com\",\n  \"googleClientSecret\": \"m-hzuH_h2O81XJkd2xNYY6QU\"\n\n  // \"alpha\": {\n  //   \"googleClientId\": \"609265890429-c5d69skkd9o2f1fksco00294oom2burf.apps.googleusercontent.com\",\n  //   \"googleAPIKey\": \"AIzaSyDkiyjtUnxlzQUyxnu0WqUtkhyV8Q2KyA0\"\n  // },\n  //\n  // \"beta\": {\n  //   \"googleClientId\": \"609265890429-n8ottusag6nrsekmddusvlkl159gqpcg.apps.googleusercontent.com\",\n  //   \"googleAPIKey\": \"AIzaSyDCOT-fmjG2gnAtVXfSceL41Od8WykmRcE\"\n  // },\n  //\n  // \"release\": {\n  //   \"googleClientId\": \"609265890429-7j1d1dfo11m1h35gboc4cr4fejcglmhl.apps.googleusercontent.com\",\n  //   \"googleAPIKey\": \"AIzaSyAYQEmBt5F_-CxcTuaIScgFv_SeYtzfikc\"\n  // }\n};\n","import { remote } from 'electron';\nimport jetpack from 'fs-jetpack';\nimport { secret } from './secret';\n\nexport var ArbitratorConfig = {\n  /**\n   * Set this value to the Google Web Application Client ID you generated when\n   * creating a new OAuth2 permission in your Google Developer Console.\n   */\n\n  // NOTE: These values should all be injected, based on the appropriate\n  //       environment, during the build.\n  'google_client_id': secret.googleClientId,\n  'google_client_secret': secret.googleClientSecret,\n  'version_number': \"2.0.0\"\n};\n","// This helper remembers the size and position of your windows (and restores\n// them in that place after app relaunch).\n// Can be used for more than one window, just construct many\n// instances of it and give each different name.\n\nimport { app, BrowserWindow, screen } from 'electron';\nimport jetpack from 'fs-jetpack';\n\nexport default function (name, options) {\n\n    var userDataDir = jetpack.cwd(app.getPath('userData'));\n    var stateStoreFile = 'window-state-' + name +'.json';\n    var defaultSize = {\n        width: options.width,\n        height: options.height\n    };\n    var state = {};\n    var win;\n\n    var restore = function () {\n        var restoredState = {};\n        try {\n            restoredState = userDataDir.read(stateStoreFile, 'json');\n        } catch (err) {\n            // For some reason json can't be read (might be corrupted).\n            // No worries, we have defaults.\n        }\n        return Object.assign({}, defaultSize, restoredState);\n    };\n\n    var getCurrentPosition = function () {\n        var position = win.getPosition();\n        var size = win.getSize();\n        return {\n            x: position[0],\n            y: position[1],\n            width: size[0],\n            height: size[1]\n        };\n    };\n\n    var windowWithinBounds = function (windowState, bounds) {\n        return windowState.x >= bounds.x &&\n            windowState.y >= bounds.y &&\n            windowState.x + windowState.width <= bounds.x + bounds.width &&\n            windowState.y + windowState.height <= bounds.y + bounds.height;\n    };\n\n    var resetToDefaults = function (windowState) {\n        var bounds = screen.getPrimaryDisplay().bounds;\n        return Object.assign({}, defaultSize, {\n            x: (bounds.width - defaultSize.width) / 2,\n            y: (bounds.height - defaultSize.height) / 2\n        });\n    };\n\n    var ensureVisibleOnSomeDisplay = function (windowState) {\n        var visible = screen.getAllDisplays().some(function (display) {\n            return windowWithinBounds(windowState, display.bounds);\n        });\n        if (!visible) {\n            // Window is partially or fully not visible now.\n            // Reset it to safe defaults.\n            return resetToDefaults(windowState);\n        }\n        return windowState;\n    };\n\n    var saveState = function () {\n        if (!win.isMinimized() && !win.isMaximized()) {\n            Object.assign(state, getCurrentPosition());\n        }\n        userDataDir.write(stateStoreFile, state, { atomic: true });\n    };\n\n    state = ensureVisibleOnSomeDisplay(restore());\n\n    win = new BrowserWindow(Object.assign({}, options, state));\n\n    win.on('close', saveState);\n\n    return win;\n}\n","import { ArbitratorConfig } from './ArbitratorConfig'\nimport * as google from 'googleapis'\nimport createWindow from '../helpers/window';\nimport { PreferenceSingleton, TimeType } from './PreferenceStore';\n\n/**\n * Create a new instance of an ArbitratorGoogleClient object for use with Arbitrator.\n *\n * @param aOptionalCallback (Optional) A callback to be called when the\n *        ArbitratorGoogleClient has finished its initialization.\n */\nexport var ArbitratorGoogleClient = function() {\n}\n\nArbitratorGoogleClient.prototype = {\n  client: null,\n\n  getToken: function() {\n    var that = this;\n    return new Promise((resolve, reject) => {\n      var prefStore = PreferenceSingleton.instance;\n      var OAuth2 = google.auth.OAuth2;\n      that.client = new OAuth2(\n        ArbitratorConfig.google_client_id,\n        ArbitratorConfig.google_client_secret,\n        'urn:ietf:wg:oauth:2.0:oob' // Instruct google to return the auth code via the title\n      );\n\n      var tokens = prefStore.getAuthTokens();\n      if (tokens) {\n        that.client.setCredentials(tokens);\n        resolve(tokens);\n      } else {\n        var scopes = [\n          'https://www.googleapis.com/auth/calendar',\n          'https://www.googleapis.com/auth/userinfo.profile'\n        ];\n\n        var url = that.client.generateAuthUrl({\n          // 'online' (default) or 'offline' (gets refresh_token)\n          access_type: 'offline',\n          scope: scopes\n        });\n\n        var window = createWindow('googleAuth', {width: 400, height:650});\n        window.loadURL(url);\n\n        window.on('page-title-updated', () => {\n          setImmediate(() => {\n            const title = window.getTitle();\n            if (title.startsWith('Denied')) {\n              reject(new Error(title.split(/[ =]/)[2]));\n              window.removeAllListeners('closed');\n              window.close();\n            } else if (title.startsWith('Success')) {\n              var code = title.split(/[ =]/)[2];\n              that.client.getToken(code, function (err, tokens) {\n                // Now tokens contains an access_token and an optional refresh_token. Save them.\n                if (!err) {\n                  that.client.setCredentials(tokens);\n                  var prefStore = PreferenceSingleton.instance;\n                  prefStore.setAuthTokens(tokens);\n                  resolve(tokens);\n                  window.removeAllListeners('closed');\n                  window.close();\n                }\n              });\n            }\n          });\n        });\n      }\n    });\n  },\n\n  getCalendarList: function() {\n    var that = this;\n    return new Promise((resolve, reject) => {\n      var cal = google.calendar({\n        version: 'v3',\n        auth: that.client\n      });\n\n      cal.calendarList.list(null, null,\n        function (err, result) {\n          if (err) {\n            reject(err);\n          }\n\n          resolve(result.items);\n      });\n    });\n  },\n\n  getUserId: function() {\n    var that = this;\n    return new Promise((resolve, reject) => {\n      var plus = google.plus({version: 'v1', auth: that.client});\n      plus.people.get({'userId': 'me'}, function(err, result) {\n        if (err) {\n          reject(err);\n        }\n\n        resolve(result.id);\n      });\n    });\n  },\n\n  initialize: function(aOptionalCallback) {\n      var arbiterConfig = ArbitratorConfig;\n      var config = {\n        'client_id': arbiterConfig.google_client_id,\n        'client_secret': arbiterConfig.google_client_secret,\n        'scope': 'https://www.googleapis.com/auth/calendar https://www.googleapis.com/auth/userinfo.profile',\n        'authuser': -1\n      }\n\n      var prefStore = PreferenceSingleton.instance;\n      if (prefStore.getUserId()) {\n        config.user_id = prefStore.getUserId();\n      }\n\n      var that = this;\n      this.mGapi.auth.authorize(config, function(authResult) {\n        if (authResult && !authResult.error) {\n          that.populateCalendarList();\n          that.populateUserId();\n\n          if (aOptionalCallback) {\n            aOptionalCallback();\n          }\n        }\n      });\n  }\n};\n","export var StringUtils = {\n  capitalize: function(aString) {\n    // Split into words and capitalize each word, then re-join the strings.\n    var wordArray = aString.split(/\\s/);\n    var extractedWords = new Array();\n    for (var i in wordArray) {\n      var value = wordArray[i];\n      if (value.length == 0) {\n        continue;\n      }\n      var newWord = value[0].toUpperCase() + value.substr(1);\n      extractedWords.push(newWord);\n    }\n\n    return extractedWords.join(\" \");\n  }\n};\n","import jQuery from 'jquery'\nimport $ from 'jquery'\nimport { Place } from './Place'\nimport { ArbitratorGoogleClient } from './ArbitratorGoogleClient'\nimport { ArbitratorConfig } from './ArbitratorConfig'\nimport { StringUtils } from './StringUtils'\nimport { PreferenceSingleton, TimeType } from './PreferenceStore'\nimport { Arbitrator } from './Arbitrator'\n\nexport var UIManager = function() {\n}\n\nUIManager.prototype = {\n  mGoogleClient: null,\n  mBackStack: new Array(),\n\n  /**\n   * Perform functionality when the user clicks the 'Submit' button to indicate\n   * they wish to invoke arbitrator's functionality.\n   */\n  onArbitrate: function() {\n    var scheduleText = $('#schedule').val();\n    var arb = new Arbitrator(scheduleText);\n    var calSelectionElement = document.getElementById('calendarList');\n    var selectedId = calSelectionElement[calSelectionElement.selectedIndex].id;\n    console.log(\"Arbitrating: \" + scheduleText);\n    // arb.adjustGamesOrSubmitToCalendar(selectedId);\n  },\n\n  setUIListeners: function() {\n    this._setPreferenceOnClickHandlers();\n    this._setHeaderScrollListener();\n    this._setNavDrawerOnClickHandlers();\n    this._setArbitrateOnClickHandler();\n    this._setLogoutOnClickHandler();\n    this._setDismissSnackBarOnClickHandler();\n  },\n\n  /**\n   * Refresh the preference UI from local storage and populate the UI\n   * accordingly.\n   */\n  refreshPreferences: function() {\n    var prefStore = PreferenceSingleton.instance;\n    this.refreshTimePreferences();\n    this.refreshAliasPreferences();\n    this.refreshLocationPreferences();\n\n    this._setPreferenceOnClickHandlers();\n  },\n\n  /**\n   * Refresh the preference UI from local storage for all time preferences.\n   */\n  refreshTimePreferences: function() {\n    var prefStore = PreferenceSingleton.instance;\n    var timePrefs = prefStore.getAllTimePreferences();\n    for (var key in timePrefs) {\n      if (timePrefs.hasOwnProperty(key)) {\n        $('#timePref-' + key).val(timePrefs[key]);\n      }\n    }\n  },\n\n  /**\n   * Refresh the preference UI from local storage for all location preferences.\n   */\n  refreshLocationPreferences: function() {\n    var prefStore = PreferenceSingleton.instance;\n    var locPrefs = prefStore.getAllLocationPreferences();\n    for (var key in locPrefs) {\n      if (locPrefs.hasOwnProperty(key)) {\n        this.addLocationPreference(prefStore.getLocationPreference(key));\n      }\n    }\n  },\n\n  /**\n   * Refresh the preference UI from local storage for all group/alias\n   * preferences.\n   */\n  refreshAliasPreferences: function() {\n    $('#aliasInputs').html('');\n    var prefStore = PreferenceSingleton.instance;\n    var aliasedGroups = prefStore.getAllGroupAliases();\n    for (var prop in aliasedGroups) {\n      if (aliasedGroups.hasOwnProperty(prop)) {\n        var groupAlias = aliasedGroups[prop];\n\n        this.addAliasUIFor(prop, groupAlias);\n      }\n    }\n  },\n\n  /**\n   * Set a time preference from the UI an propagate this preference to the\n   * preference store.\n   *\n   * @param aTimePrefName The name of the time preference to set from the UI.\n   */\n  setTimePreferenceFromUI: function(aTimePrefName) {\n    var timePrefVal = $('#timePref-' + aTimePrefName).val();\n    var prefName = '';\n    var prefStore = PreferenceSingleton.instance;\n    prefStore.addTimePreference(aTimePrefName, timePrefVal);\n  },\n\n  /**\n   * Add an alias UI element for a given group name and alias.\n   *\n   * @param aGroupName The name of the group (as specified in the input) for which\n   *        an alias was created.\n   * @param aGroupAlias The name of the alias to use for this group.\n   */\n  addAliasUIFor: function(aGroupName, aGroupAlias) {\n    var that = this;\n    $.get('partials/alias-preference.partial.html', function(data) {\n      var dataElement = $(data);\n      dataElement.find('.originalName')\n                 .data('actualname', aGroupName)\n                 .attr('value', aGroupName);\n      dataElement.find('.aliasRemoveButton')\n                 .data('actualname', aGroupName);\n\n      // If the group name is the same as the alias name, just assume we don't\n      // have an alias set.\n      if (aGroupAlias != aGroupName) {\n        dataElement.find('.aliasName').attr('value', aGroupAlias);\n      }\n\n      $('#aliasInputs').append(dataElement);\n      that._setAliasPreferenceOnClickHandlers();\n    });\n  },\n\n  showSnackbar: function(aMessage) {\n    $('#snackbar-message').text(aMessage);\n    $('dialog.snackbar').show();\n\n    setTimeout(function() {\n      $('dialog.snackbar').hide();\n    }, 4000);\n  },\n\n  /**\n   * Add an alias to the preference store for a given group name and alias.\n   *\n   * @param aGroupName The name of the group for which the alias should be\n   *        retrieved from the UI and placed in the preference store.\n   * @param aAliasName The name of the alias to use which should be stored in\n   *        the preference store.\n   */\n  addAliasToPrefStore: function(aGroupName, aAliasName) {\n      var prefStore = PreferenceSingleton.instance;\n      prefStore.addGroupAlias(aGroupName, aAliasName);\n      // this.acknowledgePreference(aGroupName);\n      this.showSnackbar(\"Alias '\" + aAliasName + \"' set\");\n  },\n\n  setLocationPreference: function(aLocationPrefKey, aLocationPrefName) {\n    var address = $('#locationAddressPref-' + aLocationPrefKey).val();\n    var subLocationName = $('#locationSubLocationPref-' + aLocationPrefKey).val();\n\n    var prefName = '';\n    var prefStore = PreferenceSingleton.instance;\n    prefStore.addLocationPreference(new Place(aLocationPrefKey, aLocationPrefName, address, subLocationName));\n\n    this.showSnackbar(\"Address for '\" + aLocationPrefName + \"' set\");\n  },\n\n  deleteLocationPreference: function(aLocationKey) {\n    var prefStore = PreferenceSingleton.instance;\n    prefStore.removeLocationPreference(aLocationKey);\n  },\n\n  deleteAliasPreference: function(aGroupName) {\n    var prefStore = PreferenceSingleton.instance;\n    prefStore.removeGroupAlias(aGroupName);\n  },\n\n  addLocationPreference: function(aPlace) {\n    var that = this;\n    $.get('partials/location-preference.partial.html', function(data) {\n      var dataElement = $(data);\n      var addressTextInputId = 'locationAddressPref-' + aPlace.getShortName();\n      var subLocationTextInputId = 'locationSubLocationPref-' + aPlace.getShortName();\n      var addressPlaceholderText = 'Enter address for ' + aPlace.getName();\n      if (aPlace.getAddress()) {\n        addressPlaceholderText = aPlace.getAddress();\n      }\n\n      var subLocationPlaceholderText = '';\n      if (aPlace.hasSubLocation()) {\n        subLocationPlaceholderText = aPlace.getSubLocationName();\n      }\n\n      dataElement.find('label').attr('for', addressTextInputId).text(aPlace.getName());\n      dataElement.find('.locationTextInput').attr('id', addressTextInputId)\n                 .attr('placeholder', addressPlaceholderText);\n      dataElement.find('.locationTextInput.small').attr('id', subLocationTextInputId)\n                 .attr('placeholder', subLocationPlaceholderText);\n      dataElement.find('.locationRemoveButton')\n                 .data('locationshortname', aPlace.getShortName());\n      dataElement.find('.locationSetButton')\n                 .data('locationshortname', aPlace.getShortName())\n                 .data('locationname', aPlace.getName());\n\n      $('#locationInputs').append(dataElement);\n      var addressElement = document.getElementById('locationAddressPref-' + aPlace.getShortName())\n\n      // Since this method is run every time preferences are refreshed, and in\n      // order to generalize the loadContent() method a bit we refresh all\n      // preferences on every content load, this should only be called if there\n      // actually _is_ a location preference input element in the DOM.\n      if (addressElement) {\n        // locService.enableAutoCompleteForElement(addressElement);\n        that._setLocationPreferenceOnClickHandlers();\n      }\n    });\n  },\n\n  // logout: function() {\n  //   var prefStore = PreferenceSingleton.instance;\n  //   prefStore.removeUserId();\n  //   location.reload();\n  // },\n\n  /**\n   * Set all onClick() handlers for preference UI elements.\n   */\n  _setPreferenceOnClickHandlers: function() {\n    this._setTimePreferenceOnClickHandlers();\n    this._setAliasPreferenceOnClickHandlers();\n    this._setLocationPreferenceOnClickHandlers();\n  },\n\n  /**\n   * Set the onClick() handlers for time preferences.\n   */\n  _setTimePreferenceOnClickHandlers: function() {\n    var that = this;\n    $('#setPriorToStart').click(function() {\n      var minutes = $('#timePref-priorToStart').val();\n      that.setTimePreferenceFromUI('priorToStart');\n      that.showSnackbar('Calendar events will start ' + minutes + ' minutes prior to the game start');\n    });\n\n    $('#setGameLength').click(function() {\n      var length = $('#timePref-gameLength').val();\n      that.setTimePreferenceFromUI('gameLength');\n      that.showSnackbar('Calendar events will be set to ' + length + ' minutes in length');\n    });\n\n    $('#setConsecutiveGames').click(function() {\n      var consecutiveThresh = $('#timePref-consecutiveGames').val();\n      that.setTimePreferenceFromUI('consecutiveGames');\n      that.showSnackbar(\"Any games within \" + consecutiveThresh + \" hours of each other at the same location will be considered consecutive\");\n    });\n  },\n\n  /**\n   * Set the onClick() handlers for alias/group preferences.\n   */\n  _setAliasPreferenceOnClickHandlers: function() {\n    var that = this;\n    var prefStore = PreferenceSingleton.instance;\n\n    $('button.setAlias').each(function() {\n      $(this).off('click');\n      $(this).click(function() {\n        var actualName = $(this).parent().find('.originalName').data('actualname');\n        var aliasName = $(this).parent().find('.aliasName').val();\n        that.addAliasToPrefStore(actualName, aliasName);\n      });\n    });\n\n    $('.aliasRemoveButton').each(function() {\n      $(this).off('click');\n      $(this).click(function() {\n        that.deleteAliasPreference($(this).data('actualname'));\n        $(this).parent().fadeOut(300, function () {\n          $(this).remove();\n        });\n      });\n    });\n\n    $('#aliasAddButton').off('click');\n    $('#aliasAddButton').click(function() {\n      var actualName = $('#aliasAddName').text();\n      var aliasName = $('#aliasAddAlias').text();\n\n      that.addAliasToPrefStore(actualName, aliasName);\n\n      $('#aliasAddName').text('');\n      $('#aliasAddAlias').text('');\n\n      that.refreshAliasPreferences();\n    });\n  },\n\n  _setLocationPreferenceOnClickHandlers: function() {\n    var that = this;\n    $('.locationSetButton').each(function() {\n      $(this).click(function() {\n        that.setLocationPreference($(this).data('locationshortname'), $(this).data('locationname'));\n      });\n    });\n\n    $('.locationRemoveButton').each(function() {\n      $(this).click(function() {\n        that.deleteLocationPreference($(this).data('locationshortname'));\n        $(this).parent().fadeOut(300, function () {\n          $(this).remove();\n        });\n      });\n    });\n  },\n\n/**\n * Enable the scroll listener so we can determine whether to show the box\n * shadow beneath the app bar. If the view is scrolled, the app bar will have\n * a shadow underneath it. Otherwise, the app bar will have no shadow.\n */\n  _setHeaderScrollListener: function() {\n    $(window).scroll(function() {\n      if ($(this).scrollTop() == 0) {\n          $('header').css({'box-shadow': 'none'});\n      } else {\n        $('header').css({\n          'box-shadow': '0px 2px 10px rgba(0, 0, 0, 0.2)'\n        });\n      }\n    });\n  },\n\n  /**\n   * Set the onClick() handler for the main \"arbitrate\" button.\n   */\n  _setArbitrateOnClickHandler: function() {\n    var that = this;\n    $('#arbitrate-button').click(function () {\n      that.onArbitrate();\n    });\n  },\n\n  /**\n   * Set the onClick() handler for the logout link.\n   */\n   _setLogoutOnClickHandler: function() {\n     $('#logoutLink').click(function() {\n       this.logout();\n     });\n   },\n\n   _setDismissSnackBarOnClickHandler: function() {\n     $('#dismissSnackbar').click(function(){\n       $('#snackbar-message').text('');\n       $('.snackbar').hide();\n     });\n   },\n\n  /**\n   * Set the onClick() handler for the navigation drawer button (i.e. the\n   * hamburger icon). Also sets up all the navigation drawer item onClick()\n   * handlers.\n   */\n  _setNavDrawerOnClickHandlers: function() {\n    var that = this;\n\n    $('.nav-drawer-header').click(function() {\n      $('#nav-drawer').css({\n        'transform': 'translate(-256px, 0px)'\n      });\n    });\n\n    $('.nav-drawer-item').each(function() {\n      var data = $(this).data('item');\n\n      $(this).click(function() {\n        that.loadContent(data, StringUtils.capitalize(data), function() {\n          that.refreshPreferences();\n        });\n      });\n    });\n  },\n\n  /**\n   * Open the navigation drawer using a transition animation.\n   */\n  openNavDrawer: function() {\n    $('#nav-drawer').css({\n      'transform': 'translate(0px, 0px)'\n    });\n  },\n\n  /**\n   * Close the navigation drawer using a transition animation.\n   */\n  closeNavDrawer: function() {\n    $('#nav-drawer').css({\n      'transform': 'translate(-256px, 0px)'\n    });\n  },\n\n  /**\n   * Load content into the main content pane.\n   *\n   * This asynchronously loads a file prefixed with an appropriate file id into\n   * the main content pane, adjusts the title and back stack, and calls an\n   * optional onComplete() handler when finished.\n   *\n   * @param aContentFileId The id of the content file to load. This must\n   *        correspond to a file in the partials/ subdirectory called\n   *        <aContentFileId>.partial.html.\n   * @param aTitle The title of the page to load. Will be presented in the app\n   *        bar.\n   * @param aOnComplete (optional) If included, this will be called when the\n   *        load operation has completed.\n   */\n  loadContent: function(aContentFileName, aTitle, aOnComplete) {\n    var that = this;\n\n    // Set the text of the nav drawer header\n    that.closeNavDrawer();\n\n    if (aContentFileName == 'main') {\n      that.refreshGoogleClient(function(aGoogleClient) {\n        that.populateCalendarList(aGoogleClient);\n        that.populateUserId(aGoogleClient);\n      });\n    }\n\n    $('main#content').load('partials/' + aContentFileName + '.partial.html', null,\n                           function() {\n                             that._addToBackStack({\n                               'id': aContentFileName,\n                               'name': aTitle\n                             });\n\n                             if (!that._isBackStackEmpty()) {\n                               that._showBackArrow();\n                             } else {\n                               that._showHamburgerIcon();\n                             }\n\n                             // Add the title to the app bar.\n                             $('#pageTitle').text(aTitle);\n\n                             // Add the version number to the app bar\n                             $('#versionNumber').text('v' + ArbitratorConfig.version_number);\n\n                             if (aOnComplete) {\n                               aOnComplete();\n                             }\n                           });\n  },\n\n  /**\n   * Refresh the ArbitratorGoogleClient object held internally.\n   *\n   * If necessary, this will create a new ArbitratorGoogleClient object.\n   *\n   * @param aOnComplete A function to execute after the ArbitratorGoogleClient\n   *        is initialized. If the ArbitratorGoogleClient is already set up, it\n   *        will execute immediately; otherwise, it will execute once the\n   *        ArbitratorGoogleClient is completely initialized. This function\n   *        should take a single argument: the ArbitratorGoogleClient instance\n   *        (in the event you want to work with it in the callback).\n   */\n  refreshGoogleClient: function(aOnComplete) {\n    if (this.mGoogleClient == null) {\n      this.mGoogleClient = new ArbitratorGoogleClient();\n    }\n\n    this.mGoogleClient.getToken().then(() => {\n      aOnComplete(this.mGoogleClient);\n    });\n  },\n\n  /**\n   * Populate the list of calendars in the main user interface.\n   *\n   * @param  {[ArbitratorGoogleClient]} aGoogleClient The client with which the\n   *                                    api calls should be run with.\n   */\n  populateCalendarList: function(aGoogleClient) {\n    aGoogleClient.getCalendarList()\n      .then((items) => {\n        var selectEle = $('#calendarList');\n        for (var calendarIdx in items) {\n            var calendarItem = items[calendarIdx];\n            var listItem = $('<option></option>');\n            listItem.attr('id', calendarItem.id);\n            listItem.text(calendarItem.summary);\n            selectEle.append(listItem);\n        }\n        selectEle.css('display', 'block');\n      });\n  },\n\n/**\n * Populate the Google+ user id of the user in the preference store.\n *\n * @param  {[ArbitratorGoogleClient]} aGoogleClient The client with which the\n *                                    api calls should be run with.\n */\n  populateUserId: function(aGoogleClient) {\n    aGoogleClient.getUserId().then((id) => {\n      var prefStore = PreferenceSingleton.instance;\n      prefStore.setUserId(id);\n    });\n  },\n\n  /**\n   * Show the back arrow icon in place of the navigation drawer icon and adjust\n   * the onClick() functionality for this icon so that it pops from the back\n   * stack.\n   */\n  _showBackArrow: function() {\n    var that = this;\n\n    $('#hamburger').css({\n      'background': 'no-repeat url(\"images/back.svg\")'\n    });\n\n    that._bindEventHandlerForNavMenu(true);\n  },\n\n  /**\n   * Show the hamburger (navigation drawer indicator) icon and adjust\n   * the onClick() functionality for this icon so that it opens the navigation\n   * drawer.\n   */\n  _showHamburgerIcon: function() {\n    var that = this;\n\n    $('#hamburger').css({\n      'background': 'no-repeat url(\"images/hamburger.svg\")'\n    });\n\n    that._bindEventHandlerForNavMenu(false);\n  },\n\n  /**\n   * Clear current event handlers for the nav menu button in the upper right of\n   * the app bar and re-add the appropriate onClick() handler.\n   */\n  _bindEventHandlerForNavMenu: function(aIsBack) {\n    var that = this;\n    $('#hamburger').unbind('click');\n\n    if (aIsBack) {\n      $('#hamburger').click(function() {\n        that._popBackStack();\n      });\n    } else {\n      $('#hamburger').click(function() {\n        that.openNavDrawer();\n      });\n    }\n  },\n\n  /**\n   * Add a new back stack entry to the back stack.\n   *\n   * A back stack entry consists of an object of the form:\n   * {\n   *   'id': <string>,\n   *   'name': <string\n   * }\n   * where 'id' is a string indicating the id of the content to show, which must\n   * be unique and be the prefix of one of the .partial.html files in the partials/\n   * subdirectory, and 'name' is the human-readable title of the content.\n   *\n   * @param aBackStackEntry The back stack entry to add to the back stack.\n   */\n  _addToBackStack: function(aBackStackEntry) {\n    this.mBackStack.push(aBackStackEntry);\n  },\n\n  /**\n   * Remove the last back stack entry from the back stack and return it.\n   *\n   * A back stack entry consists of an object of the form:\n   * {\n   *   'id': <string>,\n   *   'name': <string\n   * }\n   * where 'id' is a string indicating the id of the content to show, which must\n   * be unique and be the prefix of one of the .partial.html files in the partials/\n   * subdirectory, and 'name' is the human-readable title of the content.\n   *\n   * @return The back stack entry in the back stack that was last added.\n   */\n  _popBackStack: function() {\n    // Remove the current entry from the back stack first\n    this.mBackStack.pop();\n\n    var lastEntry = this.mBackStack.pop();\n\n    this.loadContent(lastEntry.id, lastEntry.name, null);\n  },\n\n  /**\n   * Determine if the back stack is empty.\n   *\n   * The back stack is empty if it contains a single content node - that of the\n   * 'main' or root content.\n   *\n   * @return True, if the back stack contains 1 item; false, otherwise.\n   */\n  _isBackStackEmpty: function() {\n    return this._getBackStackSize() == 1;\n  },\n\n  /**\n   * @return The number of items in the back stack.\n   */\n  _getBackStackSize: function() {\n    return this.mBackStack.length;\n  }\n};\n","import { Game } from './Game.js'\nimport { UIManager } from './UIManager'\nimport { PreferenceSingleton, TimeType } from './PreferenceStore'\n\n/**\n * An object for combining two callbacks for what to do when searching for Google\n * Calendar events.\n *\n * @param aMatchFunction The function to call when a matching event is found in\n *        the Google Calendar. Syntax for calling this method:\n *        onMatchFound(aGame, aCalendarEvent)\n *        where aGame represents the Game object which was searched for, and\n *        aCalendarEvent represents the Google Calendar Event object representing\n *        the event in the calendar.\n * @param aNoMatchFunction The function to call when the completed search did not\n *        find a match for a given Game object. Syntax for calling this method:\n *        onNoMatchFound(aGame)\n *        where aGame represents the Game object which was searched for.\n */\n// var EventSearchObserver = function(aMatchFunction, aNoMatchFunction) {\n//   this.onMatchFound = aMatchFunction;\n//   this.onNoMatchFound = aNoMatchFunction;\n// }\n\nexport var Arbitrator = function(aString) {\n  this.mBaseString = aString;\n  this.mGames = {};\n  this.numGames = 0;\n  this.parseFromText();\n  this.mUiManager = new UIManager();\n}\n\nArbitrator.prototype = {\n  parseFromText: function() {\n    this.mBaseString = this.mBaseString.replace(/Accepted\\ on\\ [0-9]+\\/[0-9]+\\/([0-9]{4})/g, '')\n    var cols = this.mBaseString.split(/[\\t\\n]+/);\n    this.mTable = new Array();\n    var row = new Array();\n    var columnPointer = 0;\n    var removedLastCol= false;\n    for (var col in cols) {\n      // col is our GLOBAL column pointer - the index of the current column in\n      // the whole set of all columns. columnPointer is the relative colum\n      // pointer - the index of the column in the current row.\n      var trimmedCol = cols[col].trim();\n      if (trimmedCol.length != 0) {\n        var oldLength = row.length;\n        var newLength = row.push(trimmedCol);\n\n      } else if (columnPointer == 1){\n        row.push(\"NONE\");\n      }\n\n      // Special date handling, in the event that we actually have a newline in\n      // between where the date is and where the time is (this happens occasionally)\n      if (columnPointer == 4\n          && (row[columnPointer].endsWith(\"PM\")\n              || row[columnPointer].endsWith(\"AM\"))) {\n        row[columnPointer-1] = row[columnPointer-1] + \" \" + row[columnPointer];\n        row.pop();\n        columnPointer = columnPointer - 1;\n      }\n\n      columnPointer = columnPointer + 1;\n      if (columnPointer == 9) {\n        this.mTable.push(row);\n        var gm = new Game(row[0], row[1], row[2], row[3], row[4], row[5], row[6], row[7], row[8]);\n        row = new Array();\n        this.mGames[gm.getId()] = gm;\n        this.numGames++;\n        columnPointer = 0;\n      }\n    }\n\n    this.findConsecutiveGames();\n  },\n\n  getNumGames: function() {\n    return this.numGames;\n  },\n\n  getGameById: function(aId) {\n    if (this.mGames[aId]) {\n      return this.mGames[aId];\n    }\n\n    return null;\n  },\n\n  getRows: function() {\n    return this.mTable;\n  },\n\n  getColumns: function(aRow) {\n    return this.mTable[aRow];\n  },\n\n  getDescription: function(aRow) {\n    // Game description is column 5\n    return this.mTable[aRow][5];\n  },\n\n  /**\n   * @returns 0, if the row is a referee assignment; 1, if the row is a linesman\n   *          assignment; -1 otherwise.\n   */\n  getRole: function(aGameId) {\n    return this.mGames[aGameId].getRole();\n  },\n\n//   /**\n//    * Notify the user that a game was added to his/her calendar.\n//    */\n//   // notifyGameAdded: function(aGame) {\n//   //   this.mUiManager.setMessage('Game #' + aGame.getId() + ' was added to Google Calendar.');\n//   //   this.mUiManager.refreshPreferences();\n//   // },\n//\n//   /**\n//    * Notify the user that a game was adjusted on his/her calendar.\n//    */\n//   // notifyGameAdjusted: function(aGame) {\n//   //   this.mUiManager.setMessage('Game #' + aGame.getId() + ' was adjusted in Google Calendar.');\n//   // },\n//\n//   /**\n//    * Submit games in Arbitrator to Google Calendar.\n//    *\n//    * If any games in this object correspond to games already listed in Google\n//    * Calendar, then these games will be updated with new date/time information.\n//    * If a game does not already exist in Google Calendar, then it will be added\n//    * using the submitGameToCalendar() function.\n//    *\n//    * @param aCalendarId The ID of the calendar where the games should be placed.\n//    */\n//   adjustGamesOrSubmitToCalendar: function(aCalendarId) {\n//     // Save this pointer so it can be used in the callback.\n//     var self = this;\n//     var numGames = Object.keys(this.mGames).length;\n//     var gamesProcessed = 0;\n//     var callback = new EventSearchObserver(\n//       function(aGame, aCalendarEvent) {\n//         // Do nothing for right now.\n//         self.adjustGameInCalendar(aCalendarId, aCalendarEvent, aGame);\n//         gamesProcessed++;\n//         if (gamesProcessed == numGames) {\n//           self.mUiManager.showSnackbar('Game(s) added to calendar');\n//         }\n//       },\n//\n//       function(aGame) {\n//         self.submitGameToCalendar(aCalendarId, aGame);\n//         gamesProcessed++;\n//         if (gamesProcessed == numGames) {\n//           self.mUiManager.showSnackbar('Game(s) added to calendar');\n//         }\n//       });\n//\n//     for (var key in this.mGames) {\n//       if (this.mGames.hasOwnProperty(key)) {\n//         var game = this.mGames[key];\n//         this.findGameInCalendar(aCalendarId, game, callback);\n//       }\n//     }\n//   },\n//\n//   /**\n//    * Adjust a game that is already in Google Calendar to have new data.\n//    *\n//    * This is accomplished by removing the current event in Google Calendar and\n//    * adding a new event with the corresponding data. No checking is done to\n//    * determine if these two events represent the same game.\n//    *\n//    * @param aCalendarId The id of the calendar which should have the event.\n//    * @param aEvent The event data structure given from Google that should be\n//    *        deleted.\n//    * @param aGame The game data structure that has the new data.\n//    */\n//   adjustGameInCalendar: function(aCalendarId, aEvent, aGame) {\n//     // First, delete the old event.\n//     var request = gapi.client.calendar.events.delete({\n//       'calendarId' : aCalendarId,\n//       'eventId' : aEvent.id\n//     });\n//     request.execute();\n//\n//     // Now, submit the new event.\n//     this.submitGameToCalendar(aCalendarId, aGame);\n//   },\n//\n//   /**\n//    * Submits a game to Google Calendar using the javascript rest api.\n//    *\n//    * @param aCalendarId The id of the calendar which should have the event.\n//    * @param aGame The Game to submit to the calendar.\n//    * @param aSuppressMessage If true, then no message will be shown for this event\n//    *        being added. Defaults to false.\n//    */\n//   submitGameToCalendar: function(aCalendarId, aGame) {\n//     var eventToInsert = aGame.getEventJSON();\n//     var request = gapi.client.calendar.events.insert({\n//       'calendarId' : aCalendarId,\n//       'resource' : eventToInsert\n//     });\n//     request.execute(function(aResponse){\n//       if (!aResponse['error']) {\n//         console.log(\"Request to submit game to calendar was successful\");\n//       } else {\n//         console.log(\"An error occurred: \" + aResponse);\n//       }\n//     });\n//   },\n//\n//   /**\n//    * Find a game within a given calendar.\n//    *\n//    * @param aCalendarId The google calendar id for the calendar which should be\n//    *        searched for events.\n//    * @param aGame The game that should be searched for within the calendar.\n//    * @param aCallback An object with two functions: foundMatchingEvent() and\n//    *        noMatchingEventFound(), representing logic to perform when an event\n//    *        was found or not found, respectively.\n//    */\n//   findGameInCalendar: function(aCalendarId, aGame, aCallback) {\n//     var searchString = \"{ArbitratorHash: \" + aGame.getHash() + \"}\";\n//     var request = gapi.client.calendar.events.list({\n//       'calendarId' : aCalendarId\n//     });\n//     request.execute(function(aResponse) {\n//       var results = aResponse.items;\n//       var foundEvent = false;\n//       for (var i = 0; i < results.length; i++) {\n//         var calEvent = results[i];\n//         if (calEvent.description\n//             && calEvent.description.indexOf(searchString) > 0) {\n//             aCallback.onMatchFound(aGame, calEvent)\n//             foundEvent = true;\n//             break;\n//         }\n//       }\n//\n//       if (!foundEvent) {\n//         aCallback.onNoMatchFound(aGame);\n//       }\n//     });\n//   },\n\n  /**\n   * Retrieve all games in this Arbitrator object.\n   *\n   * @return An array of all Game objects known about by this Arbitrator\n   * instance.\n   */\n  getAllGames: function() {\n    return this.mGames;\n  },\n\n//   /**\n//    * Search through all games to find those that are consecutive.\n//    *\n//    * Note that this does not currently search through calendar history. That is,\n//    * only games that are entered together in the same Arbitrator object are\n//    * under consideration for being linked in a consecutive manner.\n//    */\n  findConsecutiveGames: function() {\n    var prefStore = PreferenceSingleton.instance;\n    var gameLengthMins = prefStore.getTimePreference(TimeType.LENGTH_OF_GAME, 60);\n    var prevGame;\n    for (var index in this.mGames) {\n      var curGame = this.mGames[index];\n      if (prevGame\n          && curGame.isWithinConsecutiveTimeRangeOf(prevGame)\n          && curGame.getSite().getName() == prevGame.getSite().getName()) {\n          curGame.setConsecutiveGame(true);\n        }\n\n        prevGame = curGame;\n      }\n  }\n}\n","import { expect } from 'chai';\n\n// Just a gibberish string to represent a \"Don't Care\" term.\nexport var DONTCARE = 'jahjsya76817261kaqysgagasva9121879aksahdfa612';\n\n/**\n * Check the parameters of a given game. You can use this to check any game\n * against expected values, and either pass the above 'DONTCARE' constant if\n * you don't care about a given term, or leave the parameter undefined.\n *\n * @param aArbitrator The Arbitrator object used to parse the data. Cannot be undefined.\n * @param aGameId The id of the game, as an integer. Cannot be undefined.\n * @param aExpectedGroup The expected 'group' for the game.\n * @param aExpectedRole The expected role of the official for the game. Must be\n *        one of Role.LINESMAN or Role.REFEREE.\n * @param aExpectedDayOfMonth The day of the month (1-31) for the game.\n * @param aExpectedMonth The expected month of the game, as a 0-indexed integer.\n *        (0 = JANUARY, 1 = FEBRUARY, etc...).\n * @param aExpectedYear The expected year of the game, as a four digit integer.\n * @param aExpectedHourOfDay The expected hour in the day for the game, as a\n *        0-indexed integer representing 24 possible hours (0 = 1am, 1=2am,\n *        16 = 4pm, etc...)\n * @param aExpectedMinuteOfHour The expected minute of the hour for the game, as\n *        a 0-indexed integer from 0-59.\n * @param aExpectedLevel The expected level of the game, as parsed from the\n          getSportLevel() string.\n * @param aExpectedSite The site of the game, as a string. This must represent\n *        EXACTLY how the online site has it listed. No resolution of lat/long\n *        is currently performed.\n * @param aExpectedHomeTeam The name of the home team of the game.\n * @param aExpectedAwayTeam The name of the away team of the game.\n * @param aExpectScrimmage Whether or not this game is expected to be a scrimmage\n * @param aExpectTournament Whether or not this game is expected to be a\n *        tournament game.\n */\nexport var checkGame = function (aArbitrator, aGameId, aExpectedGroup,\n                                 aExpectedRole, aExpectedMonth,\n                                 aExpectedDayOfMonth, aExpectedYear,\n                                 aExpectedHourOfDay, aExpectedMinuteOfHour,\n                                 aExpectedLevel, aExpectedSite,\n                                 aExpectedHomeTeam, aExpectedAwayTeam,\n                                 aExpectScrimmage, aExpectTournament) {\n  // Only the game id and arbitrator must be present. All other things can be\n  // undefined, indicating a \"don't care\" term.\n  expect(aArbitrator).to.be.ok;\n  expect(aGameId).to.be.ok;\n\n  var game = aArbitrator.getGameById(aGameId);\n  expect(game).to.be.ok;\n\n  if (aExpectedGroup && aExpectedGroup != DONTCARE) {\n    expect(game.getGroup()).to.equal(aExpectedGroup);\n  }\n\n  if (aExpectedRole && aExpectedRole != DONTCARE) {\n    expect(game.getRole()).to.equal(aExpectedRole);\n  }\n\n  var moment = game.getTimestamp();\n  if (aExpectedMonth && aExpectedMonth != DONTCARE) {\n    expect(moment.month()+1).to.equal(aExpectedMonth);\n  }\n\n  if (aExpectedDayOfMonth && aExpectedDayOfMonth != DONTCARE) {\n    expect(moment.date()).to.equal(aExpectedDayOfMonth);\n  }\n\n  if (aExpectedYear && aExpectedYear != DONTCARE) {\n    expect(moment.year()).to.equal(aExpectedYear);\n  }\n\n  if (aExpectedHourOfDay && aExpectedHourOfDay != DONTCARE) {\n    expect(moment.hour()).to.equal(aExpectedHourOfDay);\n  }\n\n  if (aExpectedMinuteOfHour && aExpectedMinuteOfHour != DONTCARE) {\n    expect(moment.minute()).to.equal(aExpectedMinuteOfHour);\n  }\n\n  if (aExpectedLevel && aExpectedLevel != DONTCARE) {\n    expect(game.getLevel()).to.equal(aExpectedLevel);\n  }\n\n  if (aExpectedSite && aExpectedSite != DONTCARE) {\n    expect(game.getSite().getName()).to.equal(aExpectedSite);\n  }\n\n  if (aExpectedHomeTeam && aExpectedHomeTeam != DONTCARE) {\n    expect(game.getHomeTeam()).to.equal(aExpectedHomeTeam);\n  }\n\n  if (aExpectedAwayTeam && aExpectedAwayTeam != DONTCARE) {\n    expect(game.getAwayTeam()).to.equal(aExpectedAwayTeam);\n  }\n\n  if (aExpectScrimmage && aExpectScrimmage != DONTCARE) {\n    if (aExpectTournament && aExpectTournament != DONTCARE) {\n\n      assert.fail(isExpectScrimmage, isExpectTournament, 'cannot have a game that is both a tournament game and a scrimmage');\n    }\n\n    expect(game.isScrimmage()).to.equal(aExpectScrimmage);\n  }\n\n  if (aExpectTournament && aExpectTournament != DONTCARE) {\n    expect(game.isTournament()).to.equal(aExpectTournament);\n  }\n}\n","import { Role, Game } from '../arbitrator/Game';\nimport { expect, assert } from 'chai';\nimport { env } from '../env';\nimport { Arbitrator } from '../arbitrator/Arbitrator';\nimport { DONTCARE, checkGame } from './checkGame';\nimport * as moment from 'moment';\nimport { PreferenceSingleton, TimeType } from '../arbitrator/PreferenceStore'\nimport jetpack from 'fs-jetpack';\n\nvar singleGame = jetpack.read('src/test/fixtures/singleGame.txt');\nvar basicSchedule = jetpack.read('src/test/fixtures/basicSchedule.txt');\nvar complexSchedule = jetpack.read('src/test/fixtures/complexSchedule.txt');\n\ndescribe(\"Arbitrator\", function () {\n  it (\"parses a basic string with two games\", function() {\n    var arbitrator = new Arbitrator(basicSchedule);\n\n    expect(arbitrator).to.not.be.null;\n    expect(arbitrator.getNumGames()).to.equal(2);\n    expect(arbitrator.getGameById(1827)).to.be.null;\n    var firstGame = arbitrator.getGameById(1111);\n    expect(firstGame).to.not.be.null;\n\n    // TODO: This is the old way of doing things. It would be very nice if we\n    // could instead do something like:\n    // expect(firstGame).to.be.a('game').withId(1111).withGroup('106016').withRole(Role.REFEREE)...\n    checkGame(arbitrator, 1111, '106016', Role.REFEREE, 11, 9, 2013, 12, 30,\n              '12U Girls B', 'Bloomington Ice Garden 1', 'Bloomington',\n              'Minnetonka Black', false, false);\n    checkGame(arbitrator, 598, 'Showcase', Role.LINESMAN, 4, 26, 2014, 20, 15,\n              '16U Girls', 'Saint Louis Park, East', 'TBA', 'TBA', false, false);\n  });\n\n  it (\"parses tournaments and scrimmages correctly\", function() {\n    var arbitrator = new Arbitrator(complexSchedule);\n    expect(arbitrator.getNumGames()).to.equal(8);\n\n    // Check the characteristics of the first game.\n    checkGame(arbitrator, 4073, DONTCARE, DONTCARE, DONTCARE, DONTCARE, DONTCARE,\n              DONTCARE, DONTCARE, DONTCARE, DONTCARE, DONTCARE, DONTCARE,\n              false, true);\n\n    // Check the characteristics of the second game.\n    checkGame(arbitrator, 203, DONTCARE, DONTCARE, DONTCARE, DONTCARE, DONTCARE,\n              DONTCARE, DONTCARE, DONTCARE, DONTCARE, DONTCARE, DONTCARE, true);\n\n              // Check the summary strings to make sure they are reasonable.\n    var game1 = arbitrator.getGameById(4073);\n    var expectedSS1 = \"[106016] Referee (Squirt C Tournament)\";\n    expect(game1.getSummaryString()).to.equal(expectedSS1);\n\n    var game2 = arbitrator.getGameById(203);\n    var expectedSS2 = \"[106016] Referee Scrimmage New Prague v Farmington (10U Girls B)\";\n    expect(game2.getSummaryString()).to.equal(expectedSS2);\n  });\n\n  it (\"parses complex schedules with many games\", function() {\n    var arbitrator = new Arbitrator(complexSchedule);\n\n    expect(arbitrator.getNumGames()).to.equal(8);\n\n    // Test don't care terms.\n    checkGame(arbitrator, 330);\n\n    // Check the characteristics of the first game.\n    checkGame(arbitrator, 330, '106016', Role.REFEREE, 11, 8, 2014, 9, 50,\n              \"Squirt C\", \"New Prague Community Center\", \"New Prague\",\n              \"Dodge County Black\");\n\n    // Check the characteristics of the second game.\n    checkGame(arbitrator, 339, '106016', Role.REFEREE, 11, 8, 2014, 18, 45,\n              \"10U Girls B\", \"Eden Prairie 3\", \"Eden Prairie Red\",\n              \"Minnetonka Black\");\n\n    // Check the characteristics of the third game.\n    checkGame(arbitrator, 3839, 'MinneapHO', Role.LINESMAN, 11, 14, 2014, 20, 10,\n              \"Varsity Boys\", \"St. Louis Park Recreation Center\",\n              \"St Thomas Academy\", \"Minnetonka\");\n  });\n\n  it (\"does not truncate the start time\", function() {\n    var arbitrator = new Arbitrator(complexSchedule);\n    var game = arbitrator.getGameById(5629);\n\n    expect(game).to.be.ok;\n\n    expect(game.getTime12Hr()).to.equal(\"11:00am\");\n  });\n\n  it (\"outputs JSON formatted for Google calendar\", function() {\n    var arbitrator = new Arbitrator(complexSchedule);\n\n    var game = arbitrator.getGameById(5629);\n    expect(game).to.be.ok;\n\n    var gameJson = game.getEventJSON();\n    expect(gameJson).to.be.ok;\n    expect(game.getISOStartDate()).to.equal(gameJson.start.dateTime);\n    expect(game.getISOEndDate()).to.equal(gameJson.end.dateTime);\n\n    expect(game.getSite().getName()).to.equal(gameJson.location);\n    expect(game.getSummaryString()).to.equal(gameJson.summary);\n\n    var notes = \"Game starts at \" + String(game.getTime12Hr()) + \"\\n\\n\" + \"{ArbitratorHash: \" + String(game.getHash()) + \"}\"\n    expect(notes).to.equal(gameJson.description);\n  });\n\n  it (\"records no preparation time for consecutive games\", function() {\n    var arbitrator = new Arbitrator(complexSchedule);\n\n    var game1 = arbitrator.getGameById(5694);\n    var game2 = arbitrator.getGameById(5695);\n    expect(game1).to.be.ok;\n    expect(game2).to.be.ok;\n\n    var expectedFirstStartTime = game1.getTimestamp().subtract(30, 'minutes');\n    var expectedSecondStartTime = game2.getTimestamp();\n\n    expect(game1.getISOStartDate()).to.equal(expectedFirstStartTime.toISOString());\n    expect(game2.isConsecutiveGame()).to.be.ok;\n    expect(game2.getISOStartDate()).to.equal(expectedSecondStartTime.toISOString());\n  });\n\n  it(\"intializes preferences to sane defaults\", function() {\n    var prefStore = PreferenceSingleton.instance;\n    expect(prefStore.hasAliasedGroups()).to.be.falsy;\n    expect(prefStore.hasTimePreferences()).to.be.falsy;\n  });\n\n  it (\"recognizes time preferences set prior to parsing strings\", function() {\n    var prefStore = PreferenceSingleton.instance;\n\n    prefStore.addTimePreference(TimeType.PRIOR_TO_START, 61);\n    prefStore.addTimePreference(TimeType.LENGTH_OF_GAME, 90);\n    prefStore.addGroupAlias('106016', 'D6');\n\n    var arbitrator = new Arbitrator(basicSchedule);\n\n    expect(arbitrator.getNumGames()).to.equal(2);\n    expect(prefStore.getTimePreference(TimeType.PRIOR_TO_START)).to.equal(61);\n\n    var game = arbitrator.getGameById(1111);\n    expect(game.getISOStartDate()).to.equal(moment(\"11/9/2013 12:30 PM\").subtract(61, 'minutes').toISOString());\n    expect(game.getISOEndDate()).to.equal(moment(\"11/9/2013 12:30 PM\").add(90, 'minutes').toISOString());\n    assert(game.getEventJSON().description.indexOf(\"Game starts at 12:30pm\") > -1, 'the game should start at 12:30pm and this should be in the calendar event description');\n\n    prefStore.removeTimePreference(TimeType.PRIOR_TO_START);\n    prefStore.removeTimePreference(TimeType.LENGTH_OF_GAME);\n\n    expect(game.getISOEndDate()).to.equal(\"2013-11-09T19:30:00.000Z\");\n    expect(game.getISOStartDate()).to.equal(\"2013-11-09T18:00:00.000Z\");\n  });\n\n  it (\"outputs the correct start and end dates when end date is days in the future\", function() {\n    var prefStore = PreferenceSingleton.instance;\n    var arbitrator = new Arbitrator(singleGame);\n    var game = arbitrator.getGameById(5422);\n\n    expect(game).to.be.ok;\n\n    prefStore.addTimePreference(TimeType.PRIOR_TO_START, 60);\n    prefStore.addTimePreference(TimeType.LENGTH_OF_GAME, 120);\n\n    // Basic game checking\n    checkGame(arbitrator, 5422, DONTCARE, DONTCARE, 11, 22, 2014, 20, 40);\n\n    // Check ISO start and end times\n    expect(game.getISOStartDate()).to.equal(\"2014-11-23T01:40:00.000Z\");\n    expect(game.getISOEndDate()).to.equal(\"2014-11-23T04:40:00.000Z\");\n  });\n\n  it (\"correctly recognizes group aliases\", function () {\n    var prefStore = PreferenceSingleton.instance;\n    prefStore.addGroupAlias('106016', 'D6');\n\n    var testString = \"1111 \t\t106016 \tReferee 1 \t11/9/2013 Sat 12:30 PM \tD6, 12B \tBloomington Ice Garden 1 \tBloomington \tMinnetonka Black \t$29.50  Accepted on 10/18/2013\\n598 \t\tShowcase \tLinesman \t4/26/2014 Sat 8:15 PM \tHockey, 16U AAA \tSaint Louis Park, East \tTBA \tTBA \t$38.00\";\n    var arbitrator = new Arbitrator(testString);\n    checkGame(arbitrator, 1111, 'D6');\n\n    expect(prefStore.hasAliasedGroups()).to.be.truthy;\n\n    prefStore.removeGroupAlias('D6');\n  });\n});\n","import { PreferenceSingleton, TimeType } from '../arbitrator/PreferenceStore';\nimport { expect } from 'chai';\n\ndescribe(\"PreferenceStore\", function () {\n  it (\"is able to retrieve an instance of the PreferenceStore\", function() {\n    var prefStore = PreferenceSingleton.instance;\n    expect(prefStore).to.be.ok;\n  });\n\n  it (\"is able to set a preference in a single instance and retrieve it in another\", function() {\n    var prefStore1 = PreferenceSingleton.instance;\n    var prefStore2 = PreferenceSingleton.instance;\n\n    prefStore1.addTimePreference(TimeType.PRIOR_TO_START, 61);\n\n    expect(prefStore2.getTimePreference(TimeType.PRIOR_TO_START)).to.equal(61);\n  });\n});\n","// This file is generated automatically.\n// All modifications will be lost.\nimport \"./test/Arbitrator.spec.js\";\nimport \"./test/PreferenceStore.spec.js\";"],"names":["Place","aShortName","aName","aAddress","aSubLocationName","mShortName","mName","mAddress","mSubLocationName","prototype","getShortName","getName","getAddress","getSubLocationName","hasSubLocation","env","jetpack","cwd","__dirname","read","PREFERENCE_STORE_KEY","Symbol","PreferenceStore","name","shouldStore","_retrievePreferences","TimeType","PRIOR_TO_START","LENGTH_OF_GAME","CONSECUTIVE_GAME_THRESHOLD","authTokens","addGroupAlias","aGroupId","aGroupAlias","groupAliases","_verifyExtensibility","_putPreferences","addTimePreference","aType","aTimePeriod","time","console","log","priorStart","gameLength","consecThreshold","addLocationPreference","aPlace","locations","getTimePreference","aTimeType","aDefault","parseInt","getLocationPreference","aLocationKey","genericLoc","getAllTimePreferences","Object","freeze","getAllLocationPreferences","getAllGroupAliases","getAliasForGroupId","actualName","hasAliasedGroups","prop","hasOwnProperty","hasTimePreferences","hasLocationPreference","aPreferenceKey","removeTimePreference","removeLocationPreference","removeGroupAlias","setUserId","aUserId","userId","removeUserId","getUserId","removeAllGroupAliases","setAuthTokens","aAuthTokens","getAuthTokens","storedPrefs","_getUserHome","dir","write","process","platform","aProperty","isExtensible","newObj","x","PreferenceSingleton","defineProperty","get","global","gameLevels","Role","REFEREE","LINESMAN","UNKNOWN","Game","aId","aGroup","aRole","aTimestamp","aSportLevel","aSite","aHomeTeam","aAwayTeam","aFees","prefStore","instance","mId","mGroup","setRole","mTimestamp","mSportLevel","mSite","getPlaceForSite","mHomeTeam","mAwayTeam","mFees","mIsConsecutiveGame","getId","getGroup","getSportLevel","getSite","getHomeTeam","getAwayTeam","getFees","getTimestampAsString","components","split","getTimestamp","moment","getTime12Hr","format","getISOStartDate","startDate","priorToStart","isConsecutiveGame","subtract","toISOString","getISOEndDate","endDate","gameLengthMins","add","setConsecutiveGame","aIsConsecutive","isWithinConsecutiveTimeRangeOf","aGame","consecutiveGameThreshold","aOtherTimestamp","timeStamp","date","year","month","hours","aRoleString","search","mRole","isTeamValid","aTeamName","getLevel","levelString","levelKeys","keys","level","indexOf","yearStringIdx","yearString","slice","currentYear","Date","getFullYear","age","areTeamsValid","getSummaryString","summaryString","role","getRole","isScrimmage","isTournament","trim","getEventJSON","siteData","subLocationString","String","getHash","getIdentificationString","idString","replace","CryptoJS","SHA1","toString","enc","Hex","aSiteName","placeKey","place","undefined","secret","ArbitratorConfig","googleClientId","googleClientSecret","options","userDataDir","app","getPath","stateStoreFile","defaultSize","width","height","state","win","restore","restoredState","err","assign","getCurrentPosition","position","getPosition","size","getSize","y","windowWithinBounds","windowState","bounds","resetToDefaults","screen","getPrimaryDisplay","ensureVisibleOnSomeDisplay","visible","getAllDisplays","some","display","saveState","isMinimized","isMaximized","atomic","BrowserWindow","on","ArbitratorGoogleClient","client","getToken","that","Promise","resolve","reject","OAuth2","google","auth","google_client_id","google_client_secret","tokens","setCredentials","scopes","url","generateAuthUrl","access_type","scope","window","createWindow","loadURL","setImmediate","title","getTitle","startsWith","Error","removeAllListeners","close","code","getCalendarList","cal","calendar","version","calendarList","list","result","items","plus","people","id","initialize","aOptionalCallback","arbiterConfig","config","user_id","mGapi","authorize","authResult","error","populateCalendarList","populateUserId","StringUtils","capitalize","aString","wordArray","extractedWords","Array","i","value","length","newWord","toUpperCase","substr","push","join","UIManager","mGoogleClient","mBackStack","onArbitrate","scheduleText","$","val","arb","Arbitrator","calSelectionElement","document","getElementById","selectedId","selectedIndex","setUIListeners","_setPreferenceOnClickHandlers","_setHeaderScrollListener","_setNavDrawerOnClickHandlers","_setArbitrateOnClickHandler","_setLogoutOnClickHandler","_setDismissSnackBarOnClickHandler","refreshPreferences","refreshTimePreferences","refreshAliasPreferences","refreshLocationPreferences","timePrefs","key","locPrefs","html","aliasedGroups","groupAlias","addAliasUIFor","setTimePreferenceFromUI","aTimePrefName","timePrefVal","prefName","aGroupName","data","dataElement","find","attr","append","_setAliasPreferenceOnClickHandlers","showSnackbar","aMessage","text","show","setTimeout","hide","addAliasToPrefStore","aAliasName","setLocationPreference","aLocationPrefKey","aLocationPrefName","address","subLocationName","deleteLocationPreference","deleteAliasPreference","addressTextInputId","subLocationTextInputId","addressPlaceholderText","subLocationPlaceholderText","addressElement","_setLocationPreferenceOnClickHandlers","_setTimePreferenceOnClickHandlers","click","minutes","consecutiveThresh","each","off","parent","aliasName","fadeOut","remove","scroll","scrollTop","css","logout","loadContent","openNavDrawer","closeNavDrawer","aContentFileName","aTitle","aOnComplete","refreshGoogleClient","aGoogleClient","load","_addToBackStack","_isBackStackEmpty","_showBackArrow","_showHamburgerIcon","version_number","then","selectEle","calendarIdx","calendarItem","listItem","summary","_bindEventHandlerForNavMenu","aIsBack","unbind","_popBackStack","aBackStackEntry","pop","lastEntry","_getBackStackSize","mBaseString","mGames","numGames","parseFromText","mUiManager","cols","mTable","row","columnPointer","removedLastCol","col","trimmedCol","oldLength","newLength","endsWith","gm","findConsecutiveGames","getNumGames","getGameById","getRows","getColumns","aRow","getDescription","aGameId","getAllGames","prevGame","index","curGame","DONTCARE","checkGame","aArbitrator","aExpectedGroup","aExpectedRole","aExpectedMonth","aExpectedDayOfMonth","aExpectedYear","aExpectedHourOfDay","aExpectedMinuteOfHour","aExpectedLevel","aExpectedSite","aExpectedHomeTeam","aExpectedAwayTeam","aExpectScrimmage","aExpectTournament","expect","to","be","ok","game","equal","hour","minute","assert","fail","isExpectScrimmage","isExpectTournament"],"mappings":"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"}