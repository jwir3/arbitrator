<html>
  <head>
    <script>
      function appendResults(text) {
        console.log("***** DEBUG_jwir3: Appending results...");
        var results = document.getElementById('results');
        results.appendChild(document.createElement('P'));
        results.appendChild(document.createTextNode(text));
      }

      function makeRequest() {
        console.log("***** DEBUG_jwir3: Making request...");
        var request = gapi.client.urlshortener.url.get({
          'shortUrl': 'http://goo.gl/fbsS'
        });

        request.execute(function(response) {
          appendResults(response.longUrl);
        });
      }

      function load() {
        console.log("***** DEBUG_jwir3: Loading....");
        gapi.client.setApiKey('AIzaSyDkiyjtUnxlzQUyxnu0WqUtkhyV8Q2KyA0');
        gapi.client.load('urlshortener', 'v1', makeRequest);
        console.log("***** DEBUG_jwir3: urlshortener api loaded");
      }
    </script>
    <script src="https://apis.google.com/js/client.js?onload=load"></script>
  </head>
  <body>
    <div id="results"></div>
  </body>
</html>
